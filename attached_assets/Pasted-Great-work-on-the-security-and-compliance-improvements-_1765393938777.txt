Great work on the security and compliance improvements â€“ this is very close to production-ready now.

Please make the following targeted improvements:

1) Fix fromNumber fallback logic in campaignScheduler:
Right now, if there is no default TenantNumber but there is a non-default TenantNumber, the scheduler logs it but fromNumber ends up as an empty string.

Refactor the logic so that:
- If a default TenantNumber exists, use that.
- Else, use ANY TenantNumber for that tenant.
- If NO TenantNumber exists for that tenant, pause the campaign and continue.
- fromNumber should always be set to a real phone number string before sending.

2) Improve double-send prevention for campaigns:
The current check uses a body substring match, which will break when we use AI-assist or slightly change templates.

Add explicit campaign tracking to Messages by:
- Updating the Prisma schema to add optional fields to Message:
  - campaignId (String?, FK to Campaign)
  - campaignStepId (String?, FK to CampaignStep)
- Running the necessary Prisma migration (db push) after updating the schema.
- In the campaign scheduler, when you create the Message for an outbound campaign send, set campaignId and campaignStepId accordingly.
- Replace the existing "contains body substring" double-send check with a check like:

  const existingDelivery = await prisma.message.findFirst({
    where: {
      tenantId: campaign.tenantId,
      contactId: contact.id,
      campaignId: campaign.id,
      campaignStepId: firstStep.id,
    },
  });

  If existingDelivery exists, skip sending to that contact for this campaign step.

3) Confirm Twilio signature validation sees the parsed body:
- Show me the contents of server/src/index.ts.
- Ensure express.urlencoded({ extended: false }) is mounted BEFORE the /webhooks/twilio routes so that validateTwilioSignature receives the parsed form body for signature verification.
- If needed, adjust index.ts so that:
  - app.use(express.urlencoded({ extended: false })) and app.use(express.json()) are applied globally,
  - then app.use('/webhooks/twilio', twilioWebhooksRouter) is registered,
  - and the router itself does NOT add a second body parser before validateTwilioSignature.

4) (Optional but nice) Add a helper for future STOP handling enhancements:
- Create a small utility function in a shared module (e.g., /src/utils/smsKeywords.ts) that contains the STOP_KEYWORDS and the isStopKeyword(body) logic.
- Use that helper in twilioWebhooks.ts so we have a single place to improve STOP handling later (e.g., matching "STOP please").

After you make these changes, please:
- Run Prisma db push to update the schema.
- Restart the backend.
- Print the updated versions of:
  - server/prisma/schema.prisma
  - server/src/services/campaignScheduler.ts
  - server/src/routes/twilioWebhooks.ts
  - server/src/index.ts
