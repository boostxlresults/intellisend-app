“SMS reply → AI qualification → dedupe in ServiceTitan → create customer/location if needed → check availability → book → confirm.”

You can absolutely build it. The key is to structure it as a deterministic state machine with a few “hard stops” so you don’t create duplicates or schedule nonsense.

Below is the blueprint that will work in production.

1) Yes — the AI agent can (and should) read the full message thread

In IntelliSend, you control the conversation log, so the agent should always have access to:

The outbound message(s) you sent (including the exact offer copy: “We’re in your neighborhood… $28.88 HVAC Tune-Up”)

The customer’s reply

The full thread history (last N messages, timestamps)

Campaign metadata (campaignId, offerId, sending number, etc.)

That’s how the AI knows what they’re responding to.

Implementation detail (important):
Treat every outbound campaign send as an “Offer Context Record” in your DB:

offerId

offerType (HVAC Tune-Up Special)

price (28.88)

businessUnitHint

jobTypeHint

terms

expiration (optional)

knowledgeBaseId (for Q&A)

followupQuestionsSchema

Then, when the customer replies, the agent loads the last outbound message and maps it to offerId.

2) ServiceTitan pieces you’ll use (and why)
A) Bookings API (what you already have)

Bookings are “incoming inquiries” that land on the Calls screen, and the docs explicitly call out the use case of submitting requests from a custom widget and having CSRs follow up/accept/dismiss.

You’re already using bookings successfully as your “signal.”

B) CRM API for Customers + Locations

The CRM docs explicitly state you can create a new customer and location so you can book a new job.

That’s the official pathway for “customer record doesn’t exist yet.”

C) Job Planning API for Jobs + Appointments

Job Planning docs cover retrieving appointments and jobs, rescheduling appointments, and “book a job.”
Also, in ServiceTitan’s own UI guidance, an appointment is created as part of booking a job.

So yes—actual scheduling is doable, but the exact write endpoints/scopes available to you depend on your tenant’s enabled modules and the scopes you selected.

3) The exact AI conversation flow (production-safe)
Step 0 — Detect intent + anchor the context

On inbound reply:

Load last outbound message + offer metadata

Classify intent:

YES / book

more info

stop / opt out

reschedule

wrong number

not now

Step 1 — If “YES / book” → ask only the minimal questions

Keep it short. Example sequence:

“Awesome — what’s the service address?”

“Best name + email (optional)?”

“Any gate code / pets / special instructions?”

“Do mornings or afternoons work better?” (or give 2–3 options once you have availability)

Step 2 — Customer matching in ServiceTitan (dedupe-first)

Before creating anything:

Search existing customers/contacts by phone

If multiple matches: ask a disambiguation question (“Is this for the home on X St?”)

Rule: never create a new customer if you’re >80% sure it exists.

Step 3 — If no match → create Customer + Location

Using CRM:

Create customer

Create location with validated address formatting

(Again, the CRM docs explicitly position this as the prerequisite to booking a job.)

Step 4 — Confirm found data (if match exists)

If you found a customer/location:

Confirm the address (“Looks like we have you at 1234 E… is that still the service address?”)

If no: create/add a new location record under that customer.

Step 5 — Check schedule + propose times

This part depends on what you have enabled:

If you have Scheduling Pro, it’s built to power customer booking requests and interacts with job types, business units, campaigns, etc.

If not, you can still do “availability logic” in a few ways:

Pull business hours/capacity/arrival windows if your scopes support it (Dispatch endpoints)

Or keep V1 simpler: propose time windows and let ST dispatch finalize

Step 6 — Create Job + Appointment (the “actual booking”)

This is the point where you:

Create the job tied to customerId + locationId

Create/assign the appointment window (or “book job” which creates appointment)

ServiceTitan’s own appointment guidance notes that appointments are the scheduled visits and are created during job booking.
Job Planning API supports job booking and appointment operations (retrieve/reschedule/update instructions).

Step 7 — Confirm with customer

Send a confirmation SMS that includes:

Date/time window

Technician arrival window expectations

Any prep instructions

“Reply RESCHEDULE if you need to move it”

4) Two critical architecture decisions (so this works every time)
Decision A — Don’t let the AI create real jobs until it passes validation

Guardrails:

Address required

Phone required

Consent language for texting (log it)

Job type + business unit mapping must be valid (ServiceTitan warns mismatched values won’t prefill correctly).

Decision B — Use a state machine per conversation

States like:

OFFER_SENT

INBOUND_RECEIVED

QUALIFYING

MATCHING_ST_RECORDS

CREATING_ST_CUSTOMER_LOCATION

PROPOSING_TIMES

BOOKING_JOB_APPT

CONFIRMED

HANDOFF_TO_CSR

This is the difference between “cool demo” and “production system.”

5) What I recommend you build first (so you ship fast)
V1 (1–2 days): AI → booking + perfect CSR handoff

Even if you don’t fully automate job+appointment yet, you can still:

Read conversation context

Ask questions

Deduplicate customer records

Create booking in ST with a structured summary

Notify CSR

Bookings were designed for exactly this kind of “incoming inquiry to CSR follow-up.”

V2: AI → customer/location → job → appointment

Once we confirm your tenant has the needed write scopes for jobs/appointments, you turn on full automation.

6) One thing I need from you to finalize the “book actual appointment” plan

In your ServiceTitan Developer Portal scopes list, do you have:

Job Planning and Management → Jobs → Write

Job Planning and Management → Appointments → Write (or anything that sounds like booking/rescheduling appointments)

If you paste a screenshot of the Job Planning and Management section showing what’s available for Write, I’ll map the exact API call sequence (and the fallback if appointment write isn’t available).

No fluff—just the exact order of operations and what to store.